<li 
  id="passkey_<%= passkey.id %>" 
  class="card-sm flex justify-between items-center gap-4"
  style='view-transition-name: passkey-<%= passkey.id %>'
>
  <div class="flex-1 min-w-0">
    <div class="flex items-center gap-2 mb-1">
      <span class="font-semibold text-soft truncate"><%= passkey.name %></span>
      <% if passkey.last_used_at %>
        <%= tag.span('Recently Used', class: 'tag tag-accepted text-xs') if passkey.last_used_at > 7.days.ago %>
      <% end %>
    </div>
    <div class="space-y-0.5">
      <p class="text-xs text-muted">
        Created: <span class="font-semibold text-soft"><%= passkey.created_at.now? ? 'just now' : local_time(passkey.created_at) %></span>
      </p>
      <% if passkey.last_used_at %>
        <p class="text-xs text-muted">
          Last used: <span class="font-semibold text-soft">
            <%= passkey.last_used_at.now? ? 'just now' : "#{time_ago_in_words passkey.last_used_at} ago" %>
          </span>
          (<%= local_time passkey.last_used_at %>)
        </p>
      <% else %>
        <p class="text-xs text-muted">
          <span class="text-soft">Never used</span>
        </p>
      <% end %>
      <% if passkey.transports.present? %>
        <p class="text-xs text-muted">
          Transports: <span class="font-semibold text-soft"><%= passkey.transports.join(', ') %></span>
        </p>
      <% end %>
    </div>
  </div>

  <%= button_to passkey_path(passkey),
      method: :delete,
      data: { 
        turbo_confirm: "Are you sure you want to delete the passkey '#{passkey.name}'? You won't be able to use it to sign in anymore.",
        turbo_method: :delete
      },
      class: 'btn btn-sm btn-destructive btn-muted whitespace-nowrap' do %>
    <%= inline_svg_tag 'icons/trash.svg', class: 'size-4 shrink-0' %>
    <span>Delete</span>
  <% end %>
</li>
