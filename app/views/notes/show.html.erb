<%
  if @note.notable.is_a?(JobLead)
    notable_title = "#{@note.notable.title} @ #{@note.notable.company}"
    page_title = "Note for #{notable_title}"
    back_text = notable_title
  elsif @note.notable.is_a?(Interview)
    job_lead = @note.notable.job_lead
    notable_title = "#{job_lead.title} @ #{job_lead.company}"
    page_title = "Note for Interview - #{notable_title}"
    back_text = "Interview - #{notable_title}"
  else
    notable_title = @note.notable.model_name.human.titlecase
    page_title = "Note for #{notable_title}"
    back_text = notable_title
  end
%>

<% content_for :title, page_title %>

<div class="sm:w-7/8 w-full mx-auto">
  <div class="mb-4 flex gap-2 items-center justify-between">
    <%= link_to @note.notable, class: 'btn btn-sm btn-secondary btn-muted gap-1.5' do %>
      <%= inline_svg_tag 'icons/arrow-left.svg', class: 'size-3.5 shrink-0' %>
      <span>Back to <%= @note.notable.model_name.human.titlecase %></span>
    <% end %>

    <div class="flex items-center gap-2">
      <%= link_to edit_note_path(@note), class: 'btn btn-sm btn-primary btn-muted gap-2' do %>
        <%= inline_svg_tag 'icons/edit.svg', class: 'size-4 shrink-0' %>
        <span>Edit Note</span>
      <% end %>
      <%= button_to @note, method: :delete, class: 'btn btn-sm btn-destructive btn-muted gap-2', data: { turbo_confirm: 'Are you sure you want to delete this note?' } do %>
        <%= inline_svg_tag 'icons/trash.svg', class: 'size-4 shrink-0' %>
        <span>Delete Note</span>
      <% end %>
    </div>
  </div>

  <%= render @note %>
</div>
